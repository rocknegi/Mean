<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="../libs/angular.min.js"></script>
    <script src="../libs/angular-route.min.js"></script>
    <link rel="stylesheet" href="../css/styles.css">
    <script src="../libs/ngStorage.min.js"></script>
    

    <script>
        var app2 = angular.module("myApp2",["ngStorage"]);
        app2.controller("myctrl2",($scope,$localStorage,myfactory)=>{
           
            $scope.welcome = $localStorage;
            $scope.id = 0;
$scope.clicked = true;
$scope.answered1= false;
$scope.answered2= false;
  $scope.answered3= false;
  $scope.answered4= false;
            
            var promise = myfactory.get();
        promise.then(function(data){
				$scope.result= data;
             console.log($scope.result);
           // console.log($scope.result.question1);
                  var arr=[];
                  angular.forEach($scope.result, function(i,data){
                  arr.push($scope.result);
                      var id =0;
  
})
                },function(err){
				$scope.result  = err;
			});
            
            $scope.start=()=>{
  $scope.id1=0;
  $scope.id2=0;
      console.log($scope.id1);
},
          
            
$scope.next=()=>{
    console.log($scope.id1);
  $scope.id1++;
     $scope.id2++;
     $scope.change1(); 
    if($scope.answered1){$scope.change2();}
    else{$scope.change2();}
    if($scope.answered2){$scope.change3();}
    else{$scope.change3();}
    if($scope.answered3){$scope.change4();}
    else{$scope.change4();}
    
    
},
$scope.prev=()=>{
    console.log($scope.id1);
     $scope.id1--;
     $scope.id2--; 
    
},
    $scope.change1=()=>{
        console.log("radio VAlue Is",$scope.radioValue);
       if($scope.radioValue == $scope.result[0].answer){ 
           $scope.answered1 = true;
           
                  }
        
       
    },
        $scope.change2=()=>{
        console.log("radio VAlue Is",$scope.radioValue);
       if($scope.radioValue == $scope.result[1].answer){ 
           $scope.answered2 = true;
       }
        
       
    },
        $scope.change3=()=>{
        console.log("radio VAlue Is",$scope.radioValue);
       if($scope.radioValue == $scope.result[2].answer){ 
           $scope.answered3 = true;
       }
        
       
    },
        $scope.change4=()=>{
        console.log("radio VAlue Is",$scope.radioValue);
       if($scope.radioValue == $scope.result[3].answer){ 
           $scope.answered4 = true;
       }
        
       
    }
        
                      

        });
        
         app2.factory("myfactory",($http,$q)=>{
		var object = {
            get(){
                var pr = $q.defer();
				var url = "questions.json";
				$http.get(url).then(function(data){
					pr.resolve(data.data);
				},function(err){
					pr.reject(err);
				});
				return pr.promise;
            },
            
            


        }
		return object;
	});
        


    </script>
    

</head>

<body ng-app = "myApp2" ng-controller = "myctrl2" ng-class="bg">
<fieldset >
    <legend>ZZ KBC</legend>
      <div class="align">
            
          <div class="circle" ng-class={"red":clicked,"selected":answered1}>
               1  
          </div>
              <div class="circle" ng-class={"red":clicked,"selected":answered2}>
               2
          </div>
              <div class="circle" ng-class={"red":clicked,"selected":answered3}>
               3 
          </div>
              <div class="circle" ng-class={"red":clicked,"selected":answered4}>
               4 
        
        </div> 
             </div>
              
        <table>
             
            <tr>
                <td>Welcome to KBC  {{welcome.id}}</td>
            </tr>
           <tr>
               <td>
                   <button ng-click="start()">START</button>
                   
               </td>
           </tr> 
         
            <tr>
                <td ng-model="id1">Q.{{result[id1].question}} </td>
            </tr>
            <tr>
                  
                <td ng-model="id2" >{{result[id2].choices}}</td>
                
            </tr>
           
            <tr>
        <td>
           <input type="radio" name="question" value="0" ng-model="$parent.radioValue"> A

        </td>
    </tr>
    <tr>
        <td>
           <input type="radio" name="question" value="1" ng-model="$parent.radioValue"> B

        </td>
    </tr>
    <tr>
        <td>
           <input type="radio" name="question"value="2" ng-model="$parent.radioValue"> C

        </td>
    </tr>
    <tr>
        <td>
           <input type="radio" name="question" value="3" ng-model="$parent.radioValue"> D

        </td>
    </tr>
           
     <span>
        
         <tr>
             <td>
           <button ng-click ="prev(id1,id2)" ng-if="id1>0">PREVIOUS</button>
           <button  ng-click ="next(id1,id2)" ng-if="id1<4">NEXT</button>
             </td>
         </tr>
          </span>       
                        
            
        </table>
    
    
</fieldset>
            
</body>
</html>
